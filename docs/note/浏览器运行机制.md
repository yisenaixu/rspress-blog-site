# 浏览器运行机制

## 框架结构

用户界面

浏览器引擎

渲染引擎(浏览器内核)

## 多进程浏览器结构

### 浏览器进程

页面标签等，协调其他进程

### 网络进程

发起接收网络请求等

### 渲染器进程

渲染显示页面

默认一个tab一个渲染进程

### 插件进程

负责管理所有进程

### GPU进程

### 缓存进程

## 渲染器进程相关

核心任务，渲染资源成为向用户展示的html页面

### 线程

##### GUI渲染线程

##### js引擎线程

与渲染互斥，阻碍html解析与html解析

##### 定时触发器线程

##### 异步http请求线程

##### 事件触发线程

### 浏览器渲染流程

##### 解析html构建dom树

##### 解析css确定layout布局

> html解析与css解析并行

确定每个dom节点的在页面的位置，及坐标和边框尺寸

##### 解析js

与解析html，css互质，js可能改变dom结构，所以解析html需要等待js执行完毕

##### 生成渲染树

##### 确定渲染顺序，层级关系 paint

构建绘制记录表记录节点绘制顺序

##### 合成Compositing 根据前面的信息绘制出页面

分图层切割图块 栅格化后合成传给浏览器进程显示页面

##### 重排与重绘

**重排**是页面布局属性（position,wh)发生变化

**重绘**是渲染树中元素属性变化不影响布局，如bg-color等

**重排必然重绘**



