# HTTPS

HTTP缺点 **明文** **不安全** 引入HTTPS

## 什么是安全

- 机密性 对数据保密，只让相关的人查看
- 完整性 数据不能被篡改
- 身份认证 保证数据只发给可信的人
- 不可否认 不能否认已经发生过的行为

## 什么是HTTPS

HTTPS为HTTP新增了四大安全特性

除了协议名和端口号与HTTP不同，其他基本相同。

## HTTP over SSL/TLS

![img](https://s2.loli.net/2024/03/25/bkhNi7tKdAPHnl3.png)

## SSL/TLS

SSL改名为TLS(transport layer security)传输层安全,目前应用最广泛使TLS1.2

> ### 浏览器和服务器在使用 TLS 建立连接时需要选择一组恰当的加密算法来实现安全通信，这些算法的组合被称为“密码套件”（cipher suite，也叫加密套件）

密码套件基本格式 密钥交换算法 + 签名算法 + 对称加密算法 + 摘要算法

### HTTPS建立连接的过程，以RSA算法

#### 前提条件： 服务器非对称加密产生自己的公匙和私匙，将公匙注册到CA，CA用自己的私匙加密签名服务器的公匙颁发数字证书给服务器，CA的公匙已预先置入浏览器中

- 客户端发送clientHello请求，请求进行加密通信，同时传递支持tls协议版本，支持的加密套件，以及生产一个用于产生本次加密通话会话密匙的随机数
- 客户端响应发送serverHello，确认使用的tls版本，使用的加密套件，服务器生产的随机数以及**数字证书**
- 客户端使用CA公匙验证服务器数字证书有效（确保公匙不是伪造的），取出服务器公匙，加密报文，发送请求，发送一个随机数（pre-master）表示接下来通话使用会话密匙加密通信，结束
- 服务端收到第三个随机数后，此时客户端和服务端都有三个随机数，且是相同的，使用协商的加密算法产生会话密匙，服务器也进行回应，向客户端表示接下来通话使用加密通信，握手结束。

**RSA的缺陷**，第三个随机数使用公匙加密，如果服务器私匙被破解，则他们使用这第三个随机数生成的会话密匙的历史通信都会被破解。

**ECDHE算法**，简单来说通过椭圆曲线等数学相关的内容去用三个随机数生成第三个生成会话密匙的随机数，让黑客计算不出会话密匙

## 总结

- 通过产生会话密匙，这种对称算法，对信息传输进行加密，防止被窃听
- 通过哈希算法对发送的内容进行计算产生哈希值，对哈希值进行私匙加密公匙解密的方式，比较哈希值确认消息的完整性同时因为私匙加密，公匙解密确认发送方的身份
- 通过CA证书认证，确认服务器的公匙没有被冒充。
